<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Login</title>
	<link rel="stylesheet" href="./CSS/login.css">
	<script src="https://www.gstatic.com/firebasejs/5.10.1/firebase-app.js"></script>

	<!-- Add Firebase products that you want to use -->
	<script src="https://www.gstatic.com/firebasejs/5.10.1/firebase-auth.js"></script>
	<script src="https://www.gstatic.com/firebasejs/5.10.1/firebase-database.js"></script>
	<script>
		var config = {
			apiKey: "AIzaSyAE4AgPBHNxsiYSWZVzKds0_YNZqXrq7WU",
			authDomain: "asd-app-1debf.firebaseapp.com",
			databaseURL: "https://asd-app-1debf.firebaseio.com",
			projectId: "asd-app-1debf",
			storageBucket: "",
			messagingSenderId: "1067521630695",
			appId: "1:1067521630695:web:606716bec5757e56"
		};
		// Initialize Firebase
		firebase.initializeApp(config);
		function handleSignIn() {
			if (firebase.auth().currentUser) {
				firebase.auth().signOut();


			}
			var email = document.getElementById('username').value;
			var password = document.getElementById('password').value;
			if (email.length == 0) {
				alert('The email cannot be empty.');
				return;
			}
			if (password.length == 0 ) {
				alert('The password cannot be empty.');
				return;
			}

			firebase.auth().signInWithEmailAndPassword(email, password).then(function () {
				alert('Successful Login');
			
			}).catch(function(error) {
				var errorCode = error.code;
				var errorMessage = error.message;

				if (errorCode === 'auth/wrong-password') {
					alert('Wrong password.');
				}
				else if(errorCode === 'auth/user-not-found'){
					alert('User not Found.');
				}
				else {
					alert(errorMessage);
				}

				document.getElementById('login').disabled = false;
				return;
			});
			firebase.auth().onAuthStateChanged(function(user) {
				if(user) {
					alert('Welcome,'+user.email);
					if (email == "admin@admin.com" && password == "admin123" ){
						window.location = "https://www.google.com"
					} else {
						window.location = '/index';
					}
				}
			});
		}
	</script>
</head>
<body>
	<div class="container">
            
		<div class="nav">
			<ul>
				<li><a href="index.html">MainPage</a></li>
			</ul>
		</div>
 

		<div class="main">
			
			<div class="sideleft">
				<h1>Course Review</h1>
				<h4> 111111</h4>
				</br></br>
				<p>111111 </p>
				<p> 1111111</p>
 
			</div>
			
			<div class="sideright">
				<div class="index">
					<div >
						<p class="headline">Login</p>
						<p class="astyle">Username: </p>
						<input class="username" name="username" id="username" type="text" placeholder="Please input your email">
						<p class="astyle">Password: </p>
						<input class="password" type="password" id="password" placeholder="Please input your password">
						<input type="submit" value="login" id="login" onclick="handleSignIn()">
                                           
                                                </br>
						<p class="cstyle"><a href="/forgetpwd">Forget Password</a></p>
						</br></br>
						<p class="cstyle"><a href="/register">Sign up</a></p>
					</div>
 
				</div>
			</div>
		</div>
 
	
		<div class="footer">
				<ul>
					<li><a href="FAQ.html">About us</a></li>
                    <li><a href="contact.html">Contact us</a></li>
					
				</ul>
 
		</div>
 
	</div>
</body>
</html>